A0 <- rot.axis
Theta0 <- rot.theta
Q0 <- my.calc.q(A0,Theta0)
t <- seq(from=0,to=1.5,length=100)
dt <- t[2]-t[1]
Xs <- Zs <- Vs <- As <- matrix(0,length(t),3)
Thetas <- rep(0,length(t))
Qs <- rep(0*Hi,length(t))
Xs[1,] <- X0
Zs[1,] <- Z0
Vs[1,] <- V0
Qs[1] <- Q0
As[1,] <- A0
Thetas[1] <- Theta0
for(i in 1:(length(t)-1)){
#for(i in 1:40){
this.X <- Xs[i,]
this.V <- Vs[i,]
this.Z <- Zs[i,]
this.Q <- Qs[i]
this.A <- As[i,]
this.Theta <- Thetas[i]
next.X <- Xs[i,] + this.V * dt
next.V <- my.airo.drag.v(this.V,dt=dt,m=m,g=g,sigma=sigma)
next.Q <- my.airo.drag.rot(this.Q,this.V,dt=dt,m=m,sigma=sigma2)
next.Z <- my.airo.drag.Z(this.Z,this.V,dt=dt,m=m,sigma=sigma3)
Xs[i+1,] <- next.X
Vs[i+1,] <- next.V
Zs[i+1,] <- next.Z
Qs[i+1] <- next.Q
my.plot.shuttlecock.q(Q=1+0*Hi,S=this.X,Z=this.Z)
}
# 重力加速度（環境加速度)
g <- c(0,0,-9.8)*100  # 9.8m/s^2, 980cm/s^2
# 質量の係数
m <- 5 # 単位はgram
# 初期状態
# 初期シャトルコック先端の位置座標
X0 <- c(-200,0,115) # サービスを打つ場所と高さ
# 構えのシャトルの向き
this.Z <- c(-0.2,0,-0.5)
#this.Z <- c(-1,0,0)
this.Z <- this.Z/sqrt(sum(this.Z^2))
my.plot.court()
my.plot.shuttlecock.q(Q=1+0*Hi,S=X0,Z=this.Z)
# サーブヒットする
P <- c(1,0,-0.05)
#P <- c(1,0,0.00)
P <- P/sqrt(sum(P^2))
V <- c(1,0,0.5)
#V <- c(1,0,0)
V <- V/sqrt(sum(V^2))
# ショートサーブの初速を、4m/sくらいにしたい。
# f.accは「初速を与える加速度 m/s^2」かけるシャトル質量
#f <- 2000 # 水平にコックの頭をきれいにたたくと4m/sになる力の強さ
f <- 15000
out2 <- my.head.hit2(P,V,this.Z,f)
f.acc <- out2$f.acc
rot.axis <- out2$rot.axis
rot.theta <- out2$rot.theta/m
initial.velocity <- f.acc/m
print("初速 cm/s")
print(sqrt(sum(initial.velocity^2)))
dt <- 0.1
this.S <- initial.velocity * dt
this.theta <- rot.theta * dt
this.Q <- my.calc.q(rot.axis,this.theta)
my.plot.shuttlecock.q(Q=this.Q,S=this.S+X0,Z=this.Z,col=2)
# 重力加速度（環境加速度)
g <- c(0,0,-9.8)*100  # 9.8m/s^2, 980cm/s^2
# 質量の係数
m <- 5 # 単位はgram
# 初期状態
# 初期シャトルコック先端の位置座標
X0 <- c(-200,0,115) # サービスを打つ場所と高さ
# 構えのシャトルの向き
this.Z <- c(-0.2,0,-0.5)
#this.Z <- c(-1,0,0)
this.Z <- this.Z/sqrt(sum(this.Z^2))
my.plot.court()
my.plot.shuttlecock.q(Q=1+0*Hi,S=X0,Z=this.Z)
# サーブヒットする
P <- c(1,0,-0.05)
#P <- c(1,0,0.00)
P <- P/sqrt(sum(P^2))
V <- c(1,0,0.5)
#V <- c(1,0,0)
V <- V/sqrt(sum(V^2))
# ショートサーブの初速を、4m/sくらいにしたい。
# f.accは「初速を与える加速度 m/s^2」かけるシャトル質量
#f <- 2000 # 水平にコックの頭をきれいにたたくと4m/sになる力の強さ
f <- 10000
out2 <- my.head.hit2(P,V,this.Z,f)
f.acc <- out2$f.acc
rot.axis <- out2$rot.axis
rot.theta <- out2$rot.theta/m
initial.velocity <- f.acc/m
print("初速 cm/s")
print(sqrt(sum(initial.velocity^2)))
dt <- 0.1
this.S <- initial.velocity * dt
this.theta <- rot.theta * dt
this.Q <- my.calc.q(rot.axis,this.theta)
my.plot.shuttlecock.q(Q=this.Q,S=this.S+X0,Z=this.Z,col=2)
my.plot.court()
# 抵抗係数
v.const <- 400 # 自由落下のときの定常速度 m/s
sigma <- -g[3]*m/(v.const^2)
sigma2 <- sigma * m
sigma3 <- sigma * m
# 初期シャトルコック向き
Z0 <- this.Z
# 初速度
V0 <- initial.velocity
# 初期回転速度
# tmp.q <- my.rotation.q(c(1,0.2,0),c(0,0,-1))
A0 <- rot.axis
Theta0 <- rot.theta
Q0 <- my.calc.q(A0,Theta0)
t <- seq(from=0,to=1.5,length=100)
dt <- t[2]-t[1]
Xs <- Zs <- Vs <- As <- matrix(0,length(t),3)
Thetas <- rep(0,length(t))
Qs <- rep(0*Hi,length(t))
Xs[1,] <- X0
Zs[1,] <- Z0
Vs[1,] <- V0
Qs[1] <- Q0
As[1,] <- A0
Thetas[1] <- Theta0
for(i in 1:(length(t)-1)){
#for(i in 1:40){
this.X <- Xs[i,]
this.V <- Vs[i,]
this.Z <- Zs[i,]
this.Q <- Qs[i]
this.A <- As[i,]
this.Theta <- Thetas[i]
next.X <- Xs[i,] + this.V * dt
next.V <- my.airo.drag.v(this.V,dt=dt,m=m,g=g,sigma=sigma)
next.Q <- my.airo.drag.rot(this.Q,this.V,dt=dt,m=m,sigma=sigma2)
next.Z <- my.airo.drag.Z(this.Z,this.V,dt=dt,m=m,sigma=sigma3)
Xs[i+1,] <- next.X
Vs[i+1,] <- next.V
Zs[i+1,] <- next.Z
Qs[i+1] <- next.Q
my.plot.shuttlecock.q(Q=1+0*Hi,S=this.X,Z=this.Z)
}
# 重力加速度（環境加速度)
g <- c(0,0,-9.8)*100  # 9.8m/s^2, 980cm/s^2
# 質量の係数
m <- 5 # 単位はgram
# 初期状態
# 初期シャトルコック先端の位置座標
X0 <- c(-200,0,115) # サービスを打つ場所と高さ
# 構えのシャトルの向き
this.Z <- c(-0.2,0,-0.4)
#this.Z <- c(-1,0,0)
this.Z <- this.Z/sqrt(sum(this.Z^2))
my.plot.court()
my.plot.shuttlecock.q(Q=1+0*Hi,S=X0,Z=this.Z)
# サーブヒットする
P <- c(1,0,-0.05)
#P <- c(1,0,0.00)
P <- P/sqrt(sum(P^2))
V <- c(1,0,0.5)
#V <- c(1,0,0)
V <- V/sqrt(sum(V^2))
# ショートサーブの初速を、4m/sくらいにしたい。
# f.accは「初速を与える加速度 m/s^2」かけるシャトル質量
#f <- 2000 # 水平にコックの頭をきれいにたたくと4m/sになる力の強さ
f <- 10000
out2 <- my.head.hit2(P,V,this.Z,f)
f.acc <- out2$f.acc
rot.axis <- out2$rot.axis
rot.theta <- out2$rot.theta/m
initial.velocity <- f.acc/m
print("初速 cm/s")
print(sqrt(sum(initial.velocity^2)))
dt <- 0.1
this.S <- initial.velocity * dt
this.theta <- rot.theta * dt
this.Q <- my.calc.q(rot.axis,this.theta)
my.plot.shuttlecock.q(Q=this.Q,S=this.S+X0,Z=this.Z,col=2)
my.plot.court()
# 抵抗係数
v.const <- 400 # 自由落下のときの定常速度 m/s
sigma <- -g[3]*m/(v.const^2)
sigma2 <- sigma * m
sigma3 <- sigma * m
# 初期シャトルコック向き
Z0 <- this.Z
# 初速度
V0 <- initial.velocity
# 初期回転速度
# tmp.q <- my.rotation.q(c(1,0.2,0),c(0,0,-1))
A0 <- rot.axis
Theta0 <- rot.theta
Q0 <- my.calc.q(A0,Theta0)
t <- seq(from=0,to=1.5,length=100)
dt <- t[2]-t[1]
Xs <- Zs <- Vs <- As <- matrix(0,length(t),3)
Thetas <- rep(0,length(t))
Qs <- rep(0*Hi,length(t))
Xs[1,] <- X0
Zs[1,] <- Z0
Vs[1,] <- V0
Qs[1] <- Q0
As[1,] <- A0
Thetas[1] <- Theta0
for(i in 1:(length(t)-1)){
#for(i in 1:40){
this.X <- Xs[i,]
this.V <- Vs[i,]
this.Z <- Zs[i,]
this.Q <- Qs[i]
this.A <- As[i,]
this.Theta <- Thetas[i]
next.X <- Xs[i,] + this.V * dt
next.V <- my.airo.drag.v(this.V,dt=dt,m=m,g=g,sigma=sigma)
next.Q <- my.airo.drag.rot(this.Q,this.V,dt=dt,m=m,sigma=sigma2)
next.Z <- my.airo.drag.Z(this.Z,this.V,dt=dt,m=m,sigma=sigma3)
Xs[i+1,] <- next.X
Vs[i+1,] <- next.V
Zs[i+1,] <- next.Z
Qs[i+1] <- next.Q
my.plot.shuttlecock.q(Q=1+0*Hi,S=this.X,Z=this.Z)
}
my.plot.court()
# 抵抗係数
v.const <- 400 # 自由落下のときの定常速度 m/s
sigma <- -g[3]*m/(v.const^2)
sigma2 <- sigma * m
sigma3 <- sigma * m
# 初期シャトルコック向き
Z0 <- this.Z
# 初速度
V0 <- initial.velocity
# 初期回転速度
# tmp.q <- my.rotation.q(c(1,0.2,0),c(0,0,-1))
A0 <- rot.axis
Theta0 <- rot.theta
Q0 <- my.calc.q(A0,Theta0)
t <- seq(from=0,to=1.5,length=100)
dt <- t[2]-t[1]
Xs <- Zs <- Vs <- As <- matrix(0,length(t),3)
Thetas <- rep(0,length(t))
Qs <- rep(0*Hi,length(t))
Xs[1,] <- X0
Zs[1,] <- Z0
Vs[1,] <- V0
Qs[1] <- Q0
As[1,] <- A0
Thetas[1] <- Theta0
for(i in 1:(length(t)-1)){
#for(i in 1:40){
this.X <- Xs[i,]
this.V <- Vs[i,]
this.Z <- Zs[i,]
this.Q <- Qs[i]
this.A <- As[i,]
this.Theta <- Thetas[i]
next.X <- Xs[i,] + this.V * dt
next.V <- my.airo.drag.v(this.V,dt=dt,m=m,g=g,sigma=sigma)
next.Q <- my.airo.drag.rot(this.Q,this.V,dt=dt,m=m,sigma=sigma2)
next.Z <- my.airo.drag.Z(this.Z,this.V,dt=dt,m=m,sigma=sigma3)
Xs[i+1,] <- next.X
Vs[i+1,] <- next.V
Zs[i+1,] <- next.Z
Qs[i+1] <- next.Q
my.plot.shuttlecock.q(Q=1+0*Hi,S=this.X,Z=this.Z)
}
# 重力加速度（環境加速度)
g <- c(0,0,-9.8)*100  # 9.8m/s^2, 980cm/s^2
# 質量の係数
m <- 5 # 単位はgram
# 初期状態
# 初期シャトルコック先端の位置座標
X0 <- c(-200,0,115) # サービスを打つ場所と高さ
# 構えのシャトルの向き
this.Z <- c(-0.2,0,-0.4)
#this.Z <- c(-1,0,0)
this.Z <- this.Z/sqrt(sum(this.Z^2))
my.plot.court()
my.plot.shuttlecock.q(Q=1+0*Hi,S=X0,Z=this.Z)
# サーブヒットする
P <- c(1,0,-0.05)
#P <- c(1,0,0.00)
P <- P/sqrt(sum(P^2))
V <- c(1,0,0.5)
#V <- c(1,0,0)
V <- V/sqrt(sum(V^2))
# ショートサーブの初速を、4m/sくらいにしたい。
# f.accは「初速を与える加速度 m/s^2」かけるシャトル質量
#f <- 2000 # 水平にコックの頭をきれいにたたくと4m/sになる力の強さ
f <- 11000
out2 <- my.head.hit2(P,V,this.Z,f)
f.acc <- out2$f.acc
rot.axis <- out2$rot.axis
rot.theta <- out2$rot.theta/m
initial.velocity <- f.acc/m
print("初速 cm/s")
print(sqrt(sum(initial.velocity^2)))
dt <- 0.1
this.S <- initial.velocity * dt
this.theta <- rot.theta * dt
this.Q <- my.calc.q(rot.axis,this.theta)
my.plot.shuttlecock.q(Q=this.Q,S=this.S+X0,Z=this.Z,col=2)
my.plot.court()
# 抵抗係数
v.const <- 400 # 自由落下のときの定常速度 m/s
sigma <- -g[3]*m/(v.const^2)
sigma2 <- sigma * m
sigma3 <- sigma * m
# 初期シャトルコック向き
Z0 <- this.Z
# 初速度
V0 <- initial.velocity
# 初期回転速度
# tmp.q <- my.rotation.q(c(1,0.2,0),c(0,0,-1))
A0 <- rot.axis
Theta0 <- rot.theta
Q0 <- my.calc.q(A0,Theta0)
t <- seq(from=0,to=1.5,length=100)
dt <- t[2]-t[1]
Xs <- Zs <- Vs <- As <- matrix(0,length(t),3)
Thetas <- rep(0,length(t))
Qs <- rep(0*Hi,length(t))
Xs[1,] <- X0
Zs[1,] <- Z0
Vs[1,] <- V0
Qs[1] <- Q0
As[1,] <- A0
Thetas[1] <- Theta0
for(i in 1:(length(t)-1)){
#for(i in 1:40){
this.X <- Xs[i,]
this.V <- Vs[i,]
this.Z <- Zs[i,]
this.Q <- Qs[i]
this.A <- As[i,]
this.Theta <- Thetas[i]
next.X <- Xs[i,] + this.V * dt
next.V <- my.airo.drag.v(this.V,dt=dt,m=m,g=g,sigma=sigma)
next.Q <- my.airo.drag.rot(this.Q,this.V,dt=dt,m=m,sigma=sigma2)
next.Z <- my.airo.drag.Z(this.Z,this.V,dt=dt,m=m,sigma=sigma3)
Xs[i+1,] <- next.X
Vs[i+1,] <- next.V
Zs[i+1,] <- next.Z
Qs[i+1] <- next.Q
my.plot.shuttlecock.q(Q=1+0*Hi,S=this.X,Z=this.Z)
}
# 重力加速度（環境加速度)
g <- c(0,0,-9.8)*100  # 9.8m/s^2, 980cm/s^2
# 質量の係数
m <- 5 # 単位はgram
# 初期状態
# 初期シャトルコック先端の位置座標
X0 <- c(-200,0,115) # サービスを打つ場所と高さ
# 構えのシャトルの向き
this.Z <- c(-0.2,0,-0.4)
#this.Z <- c(-1,0,0)
this.Z <- this.Z/sqrt(sum(this.Z^2))
my.plot.court()
my.plot.shuttlecock.q(Q=1+0*Hi,S=X0,Z=this.Z)
# サーブヒットする
P <- c(1,0,-0.05)
#P <- c(1,0,0.00)
P <- P/sqrt(sum(P^2))
V <- c(1,0,0.5)
#V <- c(1,0,0)
V <- V/sqrt(sum(V^2))
# ショートサーブの初速を、4m/sくらいにしたい。
# f.accは「初速を与える加速度 m/s^2」かけるシャトル質量
#f <- 2000 # 水平にコックの頭をきれいにたたくと4m/sになる力の強さ
f <- 51000
out2 <- my.head.hit2(P,V,this.Z,f)
f.acc <- out2$f.acc
rot.axis <- out2$rot.axis
rot.theta <- out2$rot.theta/m
initial.velocity <- f.acc/m
print("初速 cm/s")
print(sqrt(sum(initial.velocity^2)))
dt <- 0.1
this.S <- initial.velocity * dt
this.theta <- rot.theta * dt
this.Q <- my.calc.q(rot.axis,this.theta)
my.plot.shuttlecock.q(Q=this.Q,S=this.S+X0,Z=this.Z,col=2)
my.plot.court()
# 抵抗係数
v.const <- 400 # 自由落下のときの定常速度 m/s
sigma <- -g[3]*m/(v.const^2)
sigma2 <- sigma * m
sigma3 <- sigma * m
# 初期シャトルコック向き
Z0 <- this.Z
# 初速度
V0 <- initial.velocity
# 初期回転速度
# tmp.q <- my.rotation.q(c(1,0.2,0),c(0,0,-1))
A0 <- rot.axis
Theta0 <- rot.theta
Q0 <- my.calc.q(A0,Theta0)
t <- seq(from=0,to=1.5,length=100)
dt <- t[2]-t[1]
Xs <- Zs <- Vs <- As <- matrix(0,length(t),3)
Thetas <- rep(0,length(t))
Qs <- rep(0*Hi,length(t))
Xs[1,] <- X0
Zs[1,] <- Z0
Vs[1,] <- V0
Qs[1] <- Q0
As[1,] <- A0
Thetas[1] <- Theta0
for(i in 1:(length(t)-1)){
#for(i in 1:40){
this.X <- Xs[i,]
this.V <- Vs[i,]
this.Z <- Zs[i,]
this.Q <- Qs[i]
this.A <- As[i,]
this.Theta <- Thetas[i]
next.X <- Xs[i,] + this.V * dt
next.V <- my.airo.drag.v(this.V,dt=dt,m=m,g=g,sigma=sigma)
next.Q <- my.airo.drag.rot(this.Q,this.V,dt=dt,m=m,sigma=sigma2)
next.Z <- my.airo.drag.Z(this.Z,this.V,dt=dt,m=m,sigma=sigma3)
Xs[i+1,] <- next.X
Vs[i+1,] <- next.V
Zs[i+1,] <- next.Z
Qs[i+1] <- next.Q
my.plot.shuttlecock.q(Q=1+0*Hi,S=this.X,Z=this.Z)
}
# 重力加速度（環境加速度)
g <- c(0,0,-9.8)*100  # 9.8m/s^2, 980cm/s^2
# 質量の係数
m <- 5 # 単位はgram
# 初期状態
# 初期シャトルコック先端の位置座標
X0 <- c(-200,0,115) # サービスを打つ場所と高さ
# 構えのシャトルの向き
this.Z <- c(-0.2,0,-0.4)
#this.Z <- c(-1,0,0)
this.Z <- this.Z/sqrt(sum(this.Z^2))
my.plot.court()
my.plot.shuttlecock.q(Q=1+0*Hi,S=X0,Z=this.Z)
# サーブヒットする
P <- c(1,0,-0.05)
#P <- c(1,0,0.00)
P <- P/sqrt(sum(P^2))
V <- c(1,0,0.5)
#V <- c(1,0,0)
V <- V/sqrt(sum(V^2))
# ショートサーブの初速を、4m/sくらいにしたい。
# f.accは「初速を与える加速度 m/s^2」かけるシャトル質量
#f <- 2000 # 水平にコックの頭をきれいにたたくと4m/sになる力の強さ
f <- 500000
out2 <- my.head.hit2(P,V,this.Z,f)
f.acc <- out2$f.acc
rot.axis <- out2$rot.axis
rot.theta <- out2$rot.theta/m
initial.velocity <- f.acc/m
print("初速 cm/s")
print(sqrt(sum(initial.velocity^2)))
dt <- 0.1
this.S <- initial.velocity * dt
this.theta <- rot.theta * dt
this.Q <- my.calc.q(rot.axis,this.theta)
my.plot.shuttlecock.q(Q=this.Q,S=this.S+X0,Z=this.Z,col=2)
my.plot.court()
# 抵抗係数
v.const <- 400 # 自由落下のときの定常速度 m/s
sigma <- -g[3]*m/(v.const^2)
sigma2 <- sigma * m
sigma3 <- sigma * m
# 初期シャトルコック向き
Z0 <- this.Z
# 初速度
V0 <- initial.velocity
# 初期回転速度
# tmp.q <- my.rotation.q(c(1,0.2,0),c(0,0,-1))
A0 <- rot.axis
Theta0 <- rot.theta
Q0 <- my.calc.q(A0,Theta0)
t <- seq(from=0,to=1.5,length=500)
dt <- t[2]-t[1]
Xs <- Zs <- Vs <- As <- matrix(0,length(t),3)
Thetas <- rep(0,length(t))
Qs <- rep(0*Hi,length(t))
Xs[1,] <- X0
Zs[1,] <- Z0
Vs[1,] <- V0
Qs[1] <- Q0
As[1,] <- A0
Thetas[1] <- Theta0
for(i in 1:(length(t)-1)){
#for(i in 1:40){
this.X <- Xs[i,]
this.V <- Vs[i,]
this.Z <- Zs[i,]
this.Q <- Qs[i]
this.A <- As[i,]
this.Theta <- Thetas[i]
next.X <- Xs[i,] + this.V * dt
next.V <- my.airo.drag.v(this.V,dt=dt,m=m,g=g,sigma=sigma)
next.Q <- my.airo.drag.rot(this.Q,this.V,dt=dt,m=m,sigma=sigma2)
next.Z <- my.airo.drag.Z(this.Z,this.V,dt=dt,m=m,sigma=sigma3)
Xs[i+1,] <- next.X
Vs[i+1,] <- next.V
Zs[i+1,] <- next.Z
Qs[i+1] <- next.Q
my.plot.shuttlecock.q(Q=1+0*Hi,S=this.X,Z=this.Z)
}
